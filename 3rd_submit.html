<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì°¸ê°€ ì œì¶œì§€ â€“ ëˆ„ì— ê³ ì¹˜ ì„±ë³„ ë§ì¶”ê¸° ëŒ€íšŒ</title>
  <style>
    :root{
      --bg:#ffffff; --paper:#ffffff; --ink:#111827; --sub:#6b7280;
      --pri:#4b5563; --muted:#e5e7eb; --ring:rgba(107,114,128,.25);
      --shadow:0 10px 30px rgba(17,24,39,.08);
      --green:#059669; --blue:#1e3a8a; --blue-bd:#bfdbfe; --blue-bg:#eff6ff;
      --rose:#9d174d; --rose-bd:#fbcfe8; --rose-bg:#fdf2f8;
      --danger:#ef4444; --danger-bd:#fecaca; --danger-bg:#fef2f2;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Malgun Gothic,Arial,sans-serif}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header.nav{position:sticky;top:0;backdrop-filter:saturate(180%) blur(8px);background:rgba(247,246,243,.75);border-bottom:1px solid var(--muted);z-index:50}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 24px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--ink)}
    .brand strong{font-weight:800}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:10px 14px;border-radius:999px;border:1px solid var(--muted);
      background:var(--paper);color:var(--ink);text-decoration:none;font-weight:600;
      text-align:center;
    }
    .btn.primary{background:var(--pri);color:#fff;border:0}
    .btn.success{background:var(--green);color:#fff;border:0}
    .btn:hover{box-shadow:0 6px 18px rgba(15,23,42,.08)}
    .btn.lg{font-size:16px; padding:10px 18px; min-height:42px; min-width:140px}
    @media (min-width:768px){ .btn.lg{font-size:17px; padding:12px 22px; min-width:180px} }

    .hero{margin:20px auto 14px;border-radius:24px;background:
      radial-gradient(1200px 600px at 10% -10%, #f3f4f6, transparent 60%),
      radial-gradient(1200px 600px at 110% 10%, #eef2f7, transparent 60%),
      var(--paper);box-shadow:var(--shadow)}
    .hero-grid{display:grid;grid-template-columns:1fr;gap:12px;padding:24px}
    .hero h1{margin:0;font-size:clamp(22px,4vw,32px);letter-spacing:-.3px;line-height:1.15;text-align:center}
    .hero .sub{margin:6px 0 0;color:var(--sub);font-weight:600;text-align:center}

    .card{background:var(--paper);border:1px solid var(--muted);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
    .card .inner{padding:18px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}

    label{font-weight:700;display:block;margin-bottom:6px}
    .subnote{color:var(--sub);font-size:12px;margin-top:4px}
    input[type="text"], input[type="tel"]{
      width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--muted); outline:none; background:#fff;
    }
    input[type="text"]:focus, input[type="tel"]:focus{box-shadow:0 0 0 3px var(--ring)}
    input.invalid{border-color:var(--danger); box-shadow:0 0 0 2px rgba(239,68,68,.2)}
    .checkbox-invalid{outline:2px solid rgba(239,68,68,.6); outline-offset:3px; border-radius:6px; padding:2px}

    fieldset{border:1px solid var(--muted);border-radius:14px;padding:14px;transition:border-color .12s ease}
    fieldset.invalid{border-color:var(--danger-bd)}
    legend{font-weight:800;color:var(--blue);padding:0 6px}
    .qgrid{display:grid;grid-template-columns:140px 1fr 1fr;gap:14px;align-items:center}
    @media (max-width:900px){.qgrid{grid-template-columns:1fr}}
    .photo{width:140px;height:140px;border-radius:12px;background:#f3f4f6;border:1px solid var(--muted);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .photo img{max-width:100%;max-height:100%;display:block}
    .name{font-weight:800}

    .radios{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .radio{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid var(--muted);border-radius:999px;cursor:pointer;transition: all .12s ease;background:#fff}
    .radio input{accent-color:#2563eb}
    .radio:hover{box-shadow:0 6px 18px rgba(15,23,42,.06)}
    .radio.selected-f{background:var(--rose-bg);border-color:var(--rose-bd);color:var(--rose)}
    .radio.selected-m{background:var(--blue-bg);border-color:var(--blue-bd);color:var(--blue)}

    .help-err{
      margin-top:6px; font-size:12px; color:var(--danger); background:var(--danger-bg);
      border:1px solid var(--danger-bd); padding:6px 8px; border-radius:8px; display:inline-block;
    }

    .actions{display:flex;gap:12px;justify-content:center;padding:16px}
    .ok{background:#ecfdf5;border:1px solid #a7f3d0;color:#065f46;padding:6px 10px;border-radius:999px;font-weight:700;display:inline-block}
    .err{background:#fee2e2;border:1px solid #fecaca;color:#b91c1c;padding:6px 10px;border-radius:999px;font-weight:700;display:inline-block}
    .agree{display:flex;gap:8px;align-items:flex-start;margin-top:10px}
    .hp{position:absolute;left:-9999px;top:-9999px}

    .form-section-title{ text-align:center; }
    #status{min-height:28px}
  </style>
</head>
<body>
  <header class="nav">
    <div class="nav-inner wrap">
      <a class="brand" href="index.html"><strong>ğŸ›ëˆ„ì— ê³ ì¹˜ ì„±ë³„ ë§ì¶”ê¸° ëŒ€íšŒ</strong></a>
      <div>
        <a class="btn" href="leaderboard-2.html">ì œ 2íšŒ ë¦¬ë”ë³´ë“œ</a>
        <a class="btn primary" href="index.html#archive">ì•„ì¹´ì´ë¸Œ</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="hero-grid">
        <h1>ì°¸ê°€ ì œì¶œì§€</h1>
        <div class="sub">ë‹‰ë„¤ì„Â·ì´ë¦„Â·íœ´ëŒ€í°ì„ ì‘ì„±í•˜ê³ , 20ë¬¸í•­ì˜ ê³ ì •ëœ ëˆ„ì— ì´ë¦„Â·ì‚¬ì§„ì„ ë³´ê³  ì„±ë³„(ì•”/ìˆ˜)ë§Œ ì„ íƒí•˜ì‹­ì‹œì˜¤.</div>
      </div>
    </section>

    <!-- ì°¸ê°€ì ì •ë³´ -->
    <section class="card" aria-labelledby="hdr-info">
      <div class="inner">
        <h2 id="hdr-info" style="margin:0 0 12px">ì°¸ê°€ì ì •ë³´</h2>
        <div class="grid">
          <div>
            <label for="nickname">ì°¸ê°€ì ë‹‰ë„¤ì„ <span class="req" style="color:var(--danger)">*</span></label>
            <input id="nickname" name="nickname" type="text" placeholder="ì˜ˆ: ëˆ„ë¥´ë¯¸"/>
          </div>
          <div>
            <label for="realname">ì°¸ê°€ì ì´ë¦„ <span class="req" style="color:var(--danger)">*</span></label>
            <input id="realname" name="realname" type="text" placeholder="ì˜ˆ: í™ê¸¸ë™"/>
          </div>
          <div>
            <label for="phone">ì°¸ê°€ì íœ´ëŒ€í° ë²ˆí˜¸ <span class="req" style="color:var(--danger)">*</span></label>
            <input id="phone" name="phone" type="tel" inputmode="tel"
                   maxlength="13" placeholder="ì˜ˆ: 010-1234-5678"/>
            <div class="subnote">ì…ë ¥ ì‹œ ìë™ìœ¼ë¡œ 000-0000-0000 í˜•ì‹ìœ¼ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.</div>
          </div>
          <div>
            <label for="edition">íšŒì°¨</label>
            <input id="edition" name="edition" type="text" value="ì œ 2íšŒ" readonly/>
          </div>
        </div>
        <label class="agree" id="agreeWrap"><input type="checkbox" id="agree"/> ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
      </div>
    </section>

    <!-- 20ê°œ ë¬¸í•­ (ì´ë¦„Â·ì‚¬ì§„ ê³ ì •) -->
    <form id="form" class="card" enctype="multipart/form-data" style="margin-top:18px" novalidate>
      <div class="inner">
        <h2 class="form-section-title" style="margin:0 0 8px">ë¬¸í•­ (ì´ 20ë¬¸í•­)</h2>
        <div id="questions" style="display:grid;gap:12px;margin-top:8px"></div>

        <div class="actions">
          <button type="submit" class="btn success lg" id="btn-submit">ì œì¶œ</button>
          <button type="button" class="btn lg" id="btn-reset">ì´ˆê¸°í™”</button>
        </div>
        <div id="status" style="text-align:center"></div>

        <input class="hp" type="text" id="website" name="website" tabindex="-1" autocomplete="off" aria-hidden="true">
      </div>
    </form>
  </main>

  <script>
    /* ====== ì„¤ì •: ì›¹ì•± URL ====== */
    const ENDPOINT = 'https://script.google.com/macros/s/AKfycbxVl9s_cs47BxdB4QhE2HJgLZQKQ3lgAScF50FsYCHy-KEE21Uo92v7cEIXl3a-9fFugw/exec';

    /* ê³ ì • ë¬¸í•­(20ê°œ): ì´ë¦„ Â· ì´ë¯¸ì§€ URL */
    const ITEMS = [
      { name:'ëˆ„ëŒì´',   image:'assets/silkworms/01.jpg' },
      { name:'ëˆ„ë¥¸ì',   image:'assets/silkworms/02.jpg' },
      { name:'ëˆ„ëª…ìŠ¤',   image:'assets/silkworms/03.jpg' },
      { name:'ëˆ„ê°ì´',   image:'assets/silkworms/04.jpg' },
      { name:'ëˆ„ë‹¬ê³°',   image:'assets/silkworms/05.jpg' },
      { name:'ëˆ„í•˜ë‚˜',   image:'assets/silkworms/06.jpg' },
      { name:'ëˆ„ë‘˜',     image:'assets/silkworms/07.jpg' },
      { name:'ëˆ„ì…‹',     image:'assets/silkworms/08.jpg' },
      { name:'ëˆ„ë„·',     image:'assets/silkworms/09.jpg' },
      { name:'ëˆ„ë‹¤ì„¯',   image:'assets/silkworms/10.jpg' },
      { name:'ëˆ„ì—¬ì„¯',   image:'assets/silkworms/11.jpg' },
      { name:'ëˆ„ì¼ê³±',   image:'assets/silkworms/12.jpg' },
      { name:'ëˆ„ì—¬ëŸ',   image:'assets/silkworms/13.jpg' },
      { name:'ëˆ„ì•„í™‰',   image:'assets/silkworms/14.jpg' },
      { name:'ëˆ„ì—´',     image:'assets/silkworms/15.jpg' },
      { name:'ëˆ„ì—´í•˜ë‚˜', image:'assets/silkworms/16.jpg' },
      { name:'ëˆ„ì—´ë‘˜',   image:'assets/silkworms/17.jpg' },
      { name:'ëˆ„ì—´ì…‹',   image:'assets/silkworms/18.jpg' },
      { name:'ëˆ„ì—´ë„·',   image:'assets/silkworms/19.jpg' },
      { name:'ëˆ„ìŠ¤ë¬¼',   image:'assets/silkworms/20.jpg' }
    ];

    const $ = (s)=>document.querySelector(s);
    const Q_TOTAL = ITEMS.length;

    /* ====== íœ´ëŒ€í° ì…ë ¥: í•­ìƒ 3-4-4 ìë™ í•˜ì´í”ˆ ====== */
    function onlyDigits(s){ return (s||'').replace(/[^\d]/g,''); }
    function format344(d){
      d = onlyDigits(d).slice(0,11); // ìµœëŒ€ 11ìë¦¬
      if (d.length <= 3) return d;
      if (d.length <= 7) return d.slice(0,3) + '-' + d.slice(3);
      return d.slice(0,3) + '-' + d.slice(3,7) + '-' + d.slice(7);
    }
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', ()=>{
      const cur = phoneInput.value;
      const formatted = format344(cur);
      const pos = phoneInput.selectionStart;
      phoneInput.value = formatted;
      // ì»¤ì„œê°€ ëìœ¼ë¡œ íŠ€ì§€ ì•Šë„ë¡ ê°„ë‹¨ ì²˜ë¦¬(ëŒ€ë¶€ë¶„ì˜ ì¼€ì´ìŠ¤ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ë™ì‘)
      phoneInput.setSelectionRange(formatted.length, formatted.length);
    });
    phoneInput.addEventListener('blur', ()=>{
      phoneInput.value = format344(phoneInput.value);
    });

    /* ====== ë¬¸í•­ ë Œë” ====== */
    const qWrap = $('#questions');
    ITEMS.forEach((it, idx)=>{
      const i = idx + 1;
      const fs = document.createElement('fieldset');
      fs.dataset.index = i;
      fs.innerHTML = `
        <legend>ë¬¸í•­ ${i}</legend>
        <div class="qgrid">
          <div class="photo"><img src="${it.image}" alt="${it.name} ì‚¬ì§„" onerror="this.alt='ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'"></div>
          <div>
            <div class="name">${it.name}</div>
            <div class="subnote">ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ ì„±ë³„ì„ ì„ íƒí•˜ì‹­ì‹œì˜¤.</div>
          </div>
          <div>
            <label>ì„±ë³„ ì„ íƒ <span class="req" style="color:#ef4444">*</span></label>
            <div class="radios" role="radiogroup" aria-label="${it.name} ì„±ë³„ ì„ íƒ">
              <label class="radio" data-type="F">
                <input type="radio" name="q${i}_gender" value="F"/>
                <span>ì•”ì»·</span>
              </label>
              <label class="radio" data-type="M">
                <input type="radio" name="q${i}_gender" value="M"/>
                <span>ìˆ˜ì»·</span>
              </label>
            </div>
            <div class="help-err" data-help style="display:none">ì´ ë¬¸í•­ì˜ ì„±ë³„ì„ ì„ íƒí•˜ì‹­ì‹œì˜¤.</div>
          </div>
        </div>
      `;
      qWrap.appendChild(fs);
    });

    // ì„ íƒ ë²„íŠ¼ ìƒ‰ìƒë§Œ í† ê¸€ + ì—ëŸ¬í‘œì‹œ í•´ì œ
    function paintGroup(group){
      const labels = group.querySelectorAll('.radio');
      labels.forEach(lb => lb.classList.remove('selected-f','selected-m'));
      const checked = group.querySelector('input[type="radio"]:checked');
      if(!checked) return;
      const type = checked.value;
      const activeLabel = checked.closest('.radio');
      if(type === 'F'){ activeLabel.classList.add('selected-f'); }
      if(type === 'M'){ activeLabel.classList.add('selected-m'); }
      const fs = group.closest('fieldset');
      fs.classList.remove('invalid');
      const help = fs.querySelector('[data-help]');
      if(help){ help.style.display = 'none'; }
    }
    qWrap.addEventListener('change', (e)=>{
      const t = e.target;
      if(t.matches('input[type="radio"][name$="_gender"]')){
        const group = t.closest('.radios');
        paintGroup(group);
      }
    });

    // ì´ˆê¸°í™”
    $('#btn-reset').addEventListener('click', ()=>{
      document.getElementById('form').reset();
      document.querySelectorAll('.radio').forEach(lb=>lb.classList.remove('selected-f','selected-m'));
      document.querySelectorAll('fieldset').forEach(fs=>fs.classList.remove('invalid'));
      document.querySelectorAll('[data-help]').forEach(el=>el.style.display='none');
      ['nickname','realname','phone'].forEach(id=>$('#'+id).classList.remove('invalid'));
      $('#agreeWrap').classList.remove('checkbox-invalid');
      $('#status').textContent = '';
    });

    // í•„ìˆ˜ ê²€ì¦ + ìƒì„¸ í‘œì‹œ + ê²½ê³ ì°½
    function validateAllWithAlert(){
      const issues = [];
      const nickname = $('#nickname');
      const realname = $('#realname');
      const phone = $('#phone');
      const agree = $('#agree');

      [nickname,realname,phone].forEach(i=>i.classList.remove('invalid'));
      $('#agreeWrap').classList.remove('checkbox-invalid');

      if(!nickname.value.trim()){
        issues.push('ë‹‰ë„¤ì„');
        nickname.classList.add('invalid');
      }
      if(!realname.value.trim()){
        issues.push('ì´ë¦„');
        realname.classList.add('invalid');
      }
      const phoneDigits = onlyDigits(phone.value);
      if(!phoneDigits){
        issues.push('íœ´ëŒ€í° ë²ˆí˜¸');
        phone.classList.add('invalid');
      }else if(phoneDigits.length !== 11){
        issues.push('íœ´ëŒ€í° ë²ˆí˜¸(11ìë¦¬)');
        phone.classList.add('invalid');
      }else{
        // ì˜¬ë°”ë¥¸ 11ìë¦¬ë©´ ë³´ê¸°ìš©ìœ¼ë¡œ í¬ë§· ê³ ì •
        phone.value = format344(phone.value);
      }
      if(!agree.checked){
        issues.push('ê°œì¸ì •ë³´ ë™ì˜');
        $('#agreeWrap').classList.add('checkbox-invalid');
      }

      const missingQuestions = [];
      for(let i=1;i<=Q_TOTAL;i++){
        const fs = document.querySelector(`fieldset[data-index="${i}"]`);
        const checked = document.querySelector(`input[name="q${i}_gender"]:checked`);
        const help = fs.querySelector('[data-help]');
        if(!checked){
          missingQuestions.push(i);
          fs.classList.add('invalid');
          if(help) help.style.display = 'inline-block';
        }else{
          fs.classList.remove('invalid');
          if(help) help.style.display = 'none';
        }
      }

      if(issues.length || missingQuestions.length){
        let msg = '';
        if(issues.length) msg += `ë¯¸ì…ë ¥ í•­ëª©: ${issues.join(', ')}\n`;
        if(missingQuestions.length) msg += `ë¯¸ì„ íƒ ë¬¸í•­: ${missingQuestions.join(', ')}`;
        alert(msg.trim());
        // ì²« ë¯¸ì„ íƒ ë¬¸í•­ ìœ„ì¹˜ë¡œ ìŠ¤í¬ë¡¤
        const firstMiss = missingQuestions[0];
        if(firstMiss){
          document.querySelector(`fieldset[data-index="${firstMiss}"]`).scrollIntoView({behavior:'smooth', block:'center'});
        }else if(issues.length){
          (nickname.classList.contains('invalid') ? nickname :
           realname.classList.contains('invalid') ? realname :
           phone).focus();
        }
        return { ok:false, issues, missingQuestions };
      }
      return { ok:true, issues:[], missingQuestions:[] };
    }

    function showStatusError(msg){ $('#status').innerHTML = `<span class="err">${msg}</span>`; }
    function showStatusOk(msg){ $('#status').innerHTML = `<span class="ok">${msg}</span>`; }

    // ì„œë²„ ì¤‘ë³µ í™•ì¸ â€” ì‹¤íŒ¨ ì‹œì—ë„ ì œì¶œ ì¤‘ë‹¨(ê°•ì œ)
    async function checkPhoneDuplicate(phoneDigits){
      const url = `${ENDPOINT}?action=checkPhone&phone=${encodeURIComponent(phoneDigits)}`;
      const res = await fetch(url, { method:'GET', cache:'no-store' });
      if(!res.ok) throw new Error('dup-check http error');
      const data = await res.json();
      if(data && data.ok === false) throw new Error('dup-check server error');
      return !!(data && data.exists);
    }

    // ì œì¶œ ë°ì´í„° ë¬¶ê¸°
    function buildFormData(){
      const fd = new FormData();
      fd.set('edition', $('#edition').value.trim());
      fd.set('nickname', $('#nickname').value.trim());
      fd.set('name', $('#realname').value.trim());
      fd.set('phone', $('#phone').value.trim());
      fd.set('phone_norm', onlyDigits($('#phone').value.trim()));
      fd.set('submittedAt', new Date().toISOString());
      ITEMS.forEach((it, idx)=>{
        const i = idx+1;
        fd.set(`q${i}_name`, it.name);
        fd.set(`q${i}_imageUrl`, new URL(it.image, location.href).href);
        const g = (document.querySelector(`input[name="q${i}_gender"]:checked`)||{}).value || '';
        fd.set(`q${i}_gender`, g);
      });
      return fd;
    }

    // ì œì¶œ
    document.getElementById('form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      $('#status').textContent = '';

      const { ok } = validateAllWithAlert();
      if(!ok) return;

      const phoneDigits = onlyDigits($('#phone').value.trim());
      const btn = $('#btn-submit');
      btn.disabled = true; btn.textContent = 'ì¤‘ë³µ í™•ì¸ ì¤‘â€¦';

      try{
        const exists = await checkPhoneDuplicate(phoneDigits);
        if(exists){
          alert('ì´ë¯¸ ë™ì¼í•œ íœ´ëŒ€í° ë²ˆí˜¸ë¡œ ì œì¶œëœ ê¸°ë¡ì´ ìˆìŠµë‹ˆë‹¤. ì¤‘ë³µ ì œì¶œì€ ë¶ˆê°€í•©ë‹ˆë‹¤.');
          showStatusError('ì¤‘ë³µ ë²ˆí˜¸ë¡œ ì œì¶œ ì°¨ë‹¨');
          btn.disabled = false; btn.textContent = 'ì œì¶œ';
          return;
        }
      }catch(err){
        alert('ì¤‘ë³µ í™•ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì‹­ì‹œì˜¤.');
        showStatusError('ì¤‘ë³µ í™•ì¸ ì‹¤íŒ¨');
        btn.disabled = false; btn.textContent = 'ì œì¶œ';
        return;
      }

      btn.disabled = true; btn.textContent = 'ì „ì†¡ ì¤‘â€¦';
      try{
        const res = await fetch(ENDPOINT, { method:'POST', body: buildFormData() });
        const data = await res.json().catch(()=>({ok:res.ok}));
        if(res.ok && data && data.ok){
          showStatusOk('ì œì¶œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!');
          alert('ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!');
          document.getElementById('form').reset();
          document.querySelectorAll('.radio').forEach(lb=>lb.classList.remove('selected-f','selected-m'));
          document.querySelectorAll('fieldset').forEach(fs=>fs.classList.remove('invalid'));
          document.querySelectorAll('[data-help]').forEach(el=>el.style.display='none');
          ['nickname','realname','phone'].forEach(id=>$('#'+id).classList.remove('invalid'));
          $('#agreeWrap').classList.remove('checkbox-invalid');
        }else if (data && data.error === 'duplicate_phone'){
          alert('ì´ë¯¸ ë™ì¼í•œ íœ´ëŒ€í° ë²ˆí˜¸ë¡œ ì œì¶œëœ ê¸°ë¡ì´ ìˆìŠµë‹ˆë‹¤. ì¤‘ë³µ ì œì¶œì€ ë¶ˆê°€í•©ë‹ˆë‹¤.');
          showStatusError('ì¤‘ë³µ ë²ˆí˜¸ë¡œ ì œì¶œ ì°¨ë‹¨');
        }else{
          showStatusError('ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
          alert('ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
          console.error('Server response:', data);
        }
      }catch(err){
        console.error(err);
        showStatusError('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }finally{
        btn.disabled = false; btn.textContent = 'ì œì¶œ';
      }
    });
  </script>
</body>
</html>
